# =============================================================================
# Converge Platform - Environment Variables
# =============================================================================
#
# This is the master .env.example for the Converge platform.
# Copy this file to .env and fill in the API keys you need.
#
#   cp .env.example .env
#   # Edit .env with your actual keys
#
# IMPORTANT: Never commit .env to git! It's already in .gitignore.
# You only need to configure the providers you plan to use.
#
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# API URL for the Converge frontend
# Local development:
VITE_API_URL=http://localhost:8080
# Production:
# VITE_API_URL=https://api.converge.zone

# Default provider to use when none specified
# CONVERGE_DEFAULT_PROVIDER=anthropic

# Default model to use when none specified
# CONVERGE_DEFAULT_MODEL=claude-3-5-sonnet-20241022

# Path to custom models.yaml (defaults to built-in)
# CONVERGE_MODELS_PATH=/path/to/custom/models.yaml

# =============================================================================
# US-BASED LLM PROVIDERS (Direct)
# =============================================================================

# Anthropic (Claude 3.5, Claude 4, Claude 4.5 Opus)
# Get your key: https://console.anthropic.com/settings/keys
# Format: sk-ant-api03-...
ANTHROPIC_API_KEY=

# OpenAI (GPT-3.5, GPT-4, GPT-4o, o1, o3, GPT-5.2)
# Get your key: https://platform.openai.com/api-keys
# Format: sk-...
OPENAI_API_KEY=

# Google Gemini (Gemini Pro, Gemini 2.5, Gemini 3)
# Get your key: https://makersuite.google.com/app/apikey
# Format: AIza...
GEMINI_API_KEY=

# Perplexity (Web search optimized - Sonar models)
# Get your key: https://www.perplexity.ai/settings/api
# Format: pplx-...
PERPLEXITY_API_KEY=

# xAI Grok (Grok 2, Grok 4.1 with real-time info)
# Get your key: https://console.x.ai/
# Format: xai-...
GROK_API_KEY=

# =============================================================================
# US-BASED ENTERPRISE NLP PROVIDERS
# =============================================================================

# Cohere (Command R/R+, embeddings, reranking) - SOC2 compliant
# Get your key: https://dashboard.cohere.com/api-keys
COHERE_API_KEY=

# AI21 Labs (Jamba models - 256K context, hybrid architecture) - SOC2 compliant
# Get your key: https://studio.ai21.com/account/api-key
AI21_API_KEY=

# =============================================================================
# EUROPEAN PROVIDERS (GDPR-compliant)
# =============================================================================

# Mistral AI (France - Mistral, Mixtral, Codestral, Pixtral)
# Get your key: https://console.mistral.ai/api-keys
MISTRAL_API_KEY=

# Apertus (Switzerland - EU digital sovereignty, GDPR-compliant)
# Get your key: https://apertus.ai/
APERTUS_API_KEY=

# =============================================================================
# CHINESE PROVIDERS (Data stays in China)
# =============================================================================

# Alibaba Qwen (DashScope - Qwen 2.5, Qwen 3)
# Get your key: https://dashscope.console.aliyun.com/apiKey
# Format: sk-...
QWEN_API_KEY=

# Baidu ERNIE (Wenxin - ERNIE Bot, ERNIE-4)
# Get your key: https://console.bce.baidu.com/qianfan/ais/console/applicationConsole/application
# Note: Requires both API key and secret key
BAIDU_API_KEY=
BAIDU_SECRET_KEY=

# Zhipu AI (GLM-4, GLM-4-Plus, GLM-4V)
# Get your key: https://open.bigmodel.cn/usercenter/apikeys
ZHIPU_API_KEY=

# DeepSeek (DeepSeek-V3, DeepSeek-R1 with thinking mode)
# Get your key: https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=

# Moonshot AI / Kimi (Kimi K2, K2.5 with agent swarm)
# Get your key: https://platform.moonshot.cn/console/api-keys
KIMI_API_KEY=

# MiniMax (ABAB models)
# Get your key: https://platform.minimaxi.com/user-center/basic-information/interface-key
MINMAX_API_KEY=

# ByteDance Doubao (Volcano Engine - most popular in China)
# Get your key: https://console.volcengine.com/ark/region:ark+cn-beijing/apiKey
DOUBAO_API_KEY=

# 01.AI / Yi (Yi-Lightning, Yi-Large, Yi-Vision)
# Get your key: https://platform.lingyiwanwu.com/apikeys
YI_API_KEY=

# Baichuan AI (Baichuan-4, Baichuan-M1 with thinking mode)
# Get your key: https://platform.baichuan-ai.com/console/apikey
BAICHUAN_API_KEY=

# StepFun (Step-2, Step-3 with 1.5T params and swarm capability)
# Get your key: https://platform.stepfun.com/interface-key
STEPFUN_API_KEY=

# =============================================================================
# AGGREGATORS (Access multiple models through single API)
# =============================================================================

# OpenRouter (Route to 100+ models from all providers)
# Get your key: https://openrouter.ai/keys
# Format: sk-or-v1-...
OPENROUTER_API_KEY=

# Groq (Ultra-fast LPU inference - 100-400ms latency)
# Get your key: https://console.groq.com/keys
GROQ_API_KEY=

# Together AI (Open-source model hosting - Llama, Mixtral, Qwen)
# Get your key: https://api.together.xyz/settings/api-keys
TOGETHER_API_KEY=

# Fireworks AI (Fast inference, function calling optimized)
# Get your key: https://fireworks.ai/api-keys
FIREWORKS_API_KEY=

# Amazon Bedrock (AWS - access to Claude, Llama, Cohere, AI21) - SOC2, HIPAA
# Get your key: https://console.aws.amazon.com/iam/
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1

# Azure OpenAI (Microsoft enterprise deployment) - SOC2, HIPAA, GDPR
# Get your key: https://portal.azure.com/#view/Microsoft_Azure_ProjectOxford/CognitiveServicesHub
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com

# =============================================================================
# EMBEDDING & RERANKING PROVIDERS
# =============================================================================

# Hugging Face Inference API (Qwen3-VL embeddings, rerankers, open models)
# Get your key: https://huggingface.co/settings/tokens
# Format: hf_...
HUGGINGFACE_API_KEY=

# =============================================================================
# SEARCH PROVIDERS
# =============================================================================

# Brave Search API (Web search for RAG and augmentation)
# Get your key: https://brave.com/search/api/
# Note: 2000 free queries/month, then ~$0.003/query
BRAVE_API_KEY=

# =============================================================================
# OCR / DOCUMENT AI PROVIDERS
# =============================================================================
#
# Note: In Converge, OCR outputs ProposedFacts (not Facts). They go through
# validators that enforce confidence thresholds, schema constraints, and
# cross-checks before becoming Facts.
#
# For 90% of workflows (invoices, forms, PDFs): Classic OCR + validators
# For 10% edge cases (tables, handwriting): VLMs with budgets and trace links

# Mistral OCR 3 (France - GDPR-compliant) - Uses MISTRAL_API_KEY above
# Model: mistral-ocr-latest, mistral-ocr-2512
# Docs: https://docs.mistral.ai/capabilities/document_ai/basic_ocr
# Pricing: $2 per 1000 pages ($1 with batch API)
# Features: Forms, invoices, tables, handwriting, low-quality scans
# Note: Uses the same MISTRAL_API_KEY as the LLM models

# DeepSeek OCR 2 (China) - Uses DEEPSEEK_API_KEY above
# Model: deepseek-ocr-2
# Docs: https://platform.deepseek.com/
# Features: 3B params, Visual Causal Flow, human-like reading order
# Note: Uses the same DEEPSEEK_API_KEY as the LLM models

# LightOnOCR-2-1B (France - GDPR-compliant, Open Source)
# Available via Hugging Face - uses HUGGINGFACE_API_KEY above
# Model: lightonai/LightOnOCR-2-1B, lightonai/LightOnOCR-2-1B-bbox
# Docs: https://huggingface.co/lightonai/LightOnOCR-2-1B
# Pricing: <$0.01 per 1000 pages
# Features: 1B params, 9x smaller than competitors, SOTA on OlmOCR-Bench
#           5.71 pages/s on H100 (~493k pages/day), Apache 2.0 license
# Note: Uses the same HUGGINGFACE_API_KEY as embedding models

# LightOn Paradigm Platform (alternative to Hugging Face)
# Get your key: https://www.lighton.ai/
# LIGHTON_API_KEY=

# =============================================================================
# LOCAL OCR (No cloud, full data sovereignty)
# =============================================================================
#
# Tesseract OCR - The "boring, reliable" OCR workhorse (feature-gated)
# Enable with: converge-provider = { features = ["tesseract"] }
#
# Installation:
#   macOS:   brew install tesseract tesseract-lang
#   Ubuntu:  apt install tesseract-ocr tesseract-ocr-eng tesseract-ocr-deu
#   Windows: https://github.com/UB-Mannheim/tesseract/wiki
#
# What it is:
#   - Classic OCR engine (originally from HP), fully open source
#   - Takes images (PNG/JPG/TIFF) and outputs text with optional layout
#   - NOT a big neural multimodal model - deterministic and tool-like
#   - Same input + same version + same settings = same output
#
# Where it shines:
#   - Clean scans, printed documents, forms, invoices, manuals, receipts
#   - High-contrast screenshots
#   - Simple page layouts
#   - Data sovereignty requirements (runs 100% locally)
#
# Where it struggles:
#   - Handwriting (weak vs modern DL OCR)
#   - Low-quality photos (blur, perspective, glare)
#   - Complex layouts with tables/columns (unless you guide it well)
#   - Mixed languages without explicit config
#
# Key knobs:
#   - PSM (Page Segmentation Mode): THE BIGGEST LEVER
#       3 = Fully automatic (default)
#       6 = Uniform block of text
#       11 = Sparse text
#       If you set the wrong mode, accuracy tanks!
#   - OEM (OCR Engine Mode): Usually leave at default (3)
#   - Languages: ALWAYS set explicitly (-l eng, -l swe, etc.)
#   - DPI: 300 minimum for good results
#   - Preprocessing: Tesseract is EXTREMELY sensitive to image quality
#
# Output formats:
#   - Plain text (default)
#   - TSV: Word-level confidence + bounding boxes (useful for validation)
#   - hOCR: HTML-like with bboxes (good for downstream table/layout analysis)
#   - ALTO XML: Common in libraries/archives
#
# Provenance tracked:
#   - Tesseract version
#   - Language pack(s) used
#   - Preprocessing params (DPI, PSM, OEM)
#   - Input/output trace hashes
#
# DON'T use Tesseract if your primary use case is:
#   - Handwriting recognition
#   - Camera photos from phones with glare
#   - Dense multi-column PDFs with complex tables
# For those, consider a DL-based OCR (still local) like a Burn/candle model.

# Path to tesseract binary (default: tesseract in PATH)
# TESSERACT_PATH=/usr/local/bin/tesseract

# Path to tessdata directory (language files)
# TESSDATA_PREFIX=/usr/local/share/tessdata

# =============================================================================
# LOCAL PROVIDERS (No API key required - full data control)
# =============================================================================

# Ollama (Local LLM inference - Qwen, Llama, Mistral, etc.)
# Install: https://ollama.ai/
# Start: ollama serve
# Pull models: ollama pull qwen2.5:7b, ollama pull llama3.2:3b
OLLAMA_URL=http://localhost:11434

# =============================================================================
# OPTIONAL: Provider-Specific Configuration
# =============================================================================

# Custom base URLs (for proxies or enterprise deployments)
# ANTHROPIC_BASE_URL=https://api.anthropic.com
# OPENAI_BASE_URL=https://api.openai.com/v1
# OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# =============================================================================
# DATA SOVEREIGNTY & COMPLIANCE REFERENCE
# =============================================================================
#
# Providers by jurisdiction:
#
# GDPR-COMPLIANT (EU data residency):
#   - Mistral (France) - LLM + OCR
#   - LightOn (France) - OCR
#   - Apertus (Switzerland)
#   - Azure OpenAI (with EU region)
#
# US-BASED:
#   - Anthropic, OpenAI, Google, Perplexity, xAI, Cohere, AI21
#   - Groq, Together, Fireworks, OpenRouter
#
# CHINA (data stays in China):
#   - Qwen (Alibaba), Baidu ERNIE, Zhipu GLM, DeepSeek (LLM + OCR)
#   - Kimi (Moonshot), MiniMax, Doubao, Yi, Baichuan, StepFun
#
# LOCAL/ON-PREMISES (full control, any jurisdiction):
#   - Ollama with open models (Qwen, Llama, Mistral, DeepSeek)
#   - LightOnOCR-2-1B (Apache 2.0, self-hostable)
#   - Tesseract OCR (open-source, system-installed)
#
# COMPLIANCE CERTIFICATIONS:
#   - SOC2: Cohere, AI21, Amazon Bedrock, Azure OpenAI
#   - HIPAA: Amazon Bedrock, Azure OpenAI
#   - GDPR: Mistral, LightOn, Apertus, Azure OpenAI (EU)
#
# =============================================================================
# MODEL SELECTION GUIDE
# =============================================================================
#
# Converge uses 5 orthogonal dimensions for automatic model selection:
#
# 1. JURISDICTION - Where can data legally reside?
#    - Unrestricted: Data can flow anywhere
#    - Trusted: GDPR adequacy countries (EU, CH, UK, JP, CA)
#    - SameRegion: Same region as user
#    - SameCountry: Same country only
#
# 2. LATENCY CLASS - How fast do you need responses?
#    - Realtime: <100ms (Groq, local Ollama)
#    - Interactive: <2s (most cloud providers)
#    - Background: <30s (async tasks)
#    - Batch: minutes (overnight jobs)
#
# 3. COST TIER - What's your budget?
#    - Minimal: Cheapest (Groq, DeepSeek, Doubao)
#    - Standard: Balance cost/quality
#    - Premium: Best quality (Claude Opus, GPT-5.2)
#
# 4. TASK COMPLEXITY - How hard is the task?
#    - Extraction: Pull structured data
#    - Classification: Categorize inputs
#    - Reasoning: Multi-step logic (use thinking_mode models)
#    - Generation: Create content
#
# 5. CAPABILITIES - What features needed?
#    - tool_use: Function calling
#    - vision: Image understanding
#    - code: Code generation
#    - reasoning: Complex logic
#    - multilingual: Non-English support
#    - web_search: Real-time info (Perplexity, Grok)
#    - thinking_mode: Extended reasoning (o1, DeepSeek-R1, Claude thinking)
#    - agentic: Multi-agent orchestration (Kimi K2.5, Step-3, GPT-5.2)
#    - ocr: Document extraction (Mistral OCR, DeepSeek OCR, LightOnOCR)
#
# =============================================================================

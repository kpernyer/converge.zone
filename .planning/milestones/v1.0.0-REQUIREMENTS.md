# Requirements Archive: v1.0.0 converge-core Restoration

**Archived:** 2026-01-27
**Status:** SHIPPED

This is the archived requirements specification for v1.0.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: converge-core v2.0.0 Restoration

**Generated:** 2026-01-23
**Scope:** Milestone 1 (v1)

## Scope Summary

| Category | Scope |
|----------|-------|
| Core Types | All Table Stakes |
| Differentiators | Full Gate Pattern |
| Extractions | Traits First (implementations in v2) |
| CI & Testing | Full CI Suite |

---

## V1 Requirements

### Core Types (Table Stakes)

| ID | Requirement | Priority | Complexity | Status |
|----|-------------|----------|------------|--------|
| **REQ-TYPE-01** | Define core type vocabulary (Context, Fact, ProposedFact, Intent) | P0 | Low | [x] Complete |
| **REQ-TYPE-02** | Define trait interfaces for all capability boundaries | P0 | Low | [x] Complete |
| **REQ-TYPE-03** | Implement enum-based state machines (invalid states unrepresentable) | P0 | Medium | [x] Complete |
| **REQ-TYPE-04** | Define error types with thiserror derivation | P0 | Low | [x] Complete |
| **REQ-TYPE-05** | Ensure serialization stability with explicit serde renames | P1 | Medium | [x] Complete |
| **REQ-TYPE-06** | Zero runtime dependencies (remove rayon, rand, sha2, hex) | P0 | Low | [x] Complete |
| **REQ-TYPE-07** | Pure validation functions (no I/O, no side effects) | P0 | Low | [x] Complete |
| **REQ-TYPE-08** | Builder patterns for complex type construction | P1 | Low | [x] Complete |
| **REQ-TYPE-09** | Comprehensive module documentation | P2 | Medium | [x] Complete |
| **REQ-TYPE-10** | Unit tests for all type invariants | P1 | Medium | [x] Complete |

### Gate Pattern (Differentiators)

| ID | Requirement | Priority | Complexity | Status |
|----|-------------|----------|------------|--------|
| **REQ-GATE-01** | Define ProposalLifecycle<I, P, V, F> generic abstraction | P0 | High | [x] Complete |
| **REQ-GATE-02** | Implement PromotionGate with ValidationReport requirement | P0 | Medium | [x] Complete |
| **REQ-GATE-03** | Explicit authority grants (no defaults that grant authority) | P0 | Medium | [x] Complete |
| **REQ-GATE-04** | Replayability honesty (system tells truth about determinism) | P1 | Medium | [x] Complete |
| **REQ-GATE-05** | Stop reason enumeration (explicit termination reasons) | P0 | Low | [x] Complete |
| **REQ-GATE-06** | TraceLink separation (Local for replay, Remote for audit) | P1 | Medium | [x] Complete |
| **REQ-GATE-07** | Kernel boundary types (constitutional types for all kernels) | P0 | High | [x] Complete |
| **REQ-GATE-08** | Governed artifact lifecycle with audit trails | P1 | Medium | [x] Complete |
| **REQ-GATE-09** | Invariant classification (categorized governance rules) | P1 | Low | [x] Complete |
| **REQ-GATE-10** | Budget types for guaranteed termination | P0 | Low | [x] Complete |

### Trait Definitions (Extraction Prep)

| ID | Requirement | Priority | Complexity | Status |
|----|-------------|----------|------------|--------|
| **REQ-TRAIT-01** | Define LlmBackend trait (signature only, no impl) | P0 | Low | [x] Complete |
| **REQ-TRAIT-02** | Define Recall trait (signature only, no impl) | P0 | Low | [x] Complete |
| **REQ-TRAIT-03** | Define ExperienceStore trait (signature only, no impl) | P0 | Low | [x] Complete |
| **REQ-TRAIT-04** | Define Validator trait (signature only, no impl) | P0 | Low | [x] Complete |
| **REQ-TRAIT-05** | Define Promoter trait (signature only, no impl) | P0 | Low | [x] Complete |
| **REQ-TRAIT-06** | Mark existing implementations as deprecated (not removed) | P1 | Low | [x] Complete |
| **REQ-TRAIT-07** | Create BOUNDARY.md documenting trait ownership | P1 | Low | [x] Complete |

### CI & Testing (Guardrails)

| ID | Requirement | Priority | Complexity | Status |
|----|-------------|----------|------------|--------|
| **REQ-CI-01** | Create deny.toml with forbidden dependency list | P0 | Low | [x] Complete |
| **REQ-CI-02** | Add cargo-deny to CI pipeline | P0 | Low | [x] Complete |
| **REQ-CI-03** | Property-based tests with proptest for invariants | P1 | Medium | [x] Complete |
| **REQ-CI-04** | Snapshot tests with insta for serialization stability | P1 | Medium | [x] Complete |
| **REQ-CI-05** | Compile-time assertions with static_assertions | P1 | Low | [x] Complete |
| **REQ-CI-06** | API stability checks with cargo-semver-checks | P2 | Low | [x] Complete |
| **REQ-CI-07** | Golden tests for every serializable type | P1 | Medium | [x] Complete |
| **REQ-CI-08** | Create PURITY.md with ALLOWED/FORBIDDEN lists | P0 | Low | [x] Complete |

### Documentation

| ID | Requirement | Priority | Complexity | Status |
|----|-------------|----------|------------|--------|
| **REQ-DOC-01** | Create PURITY.md contract document | P0 | Low | [x] Complete |
| **REQ-DOC-02** | Create BOUNDARY.md trait ownership document | P1 | Low | [x] Complete |
| **REQ-DOC-03** | Update lib.rs with module-level purity declarations | P1 | Low | [x] Complete |
| **REQ-DOC-04** | Document nine design tenets in crate docs | P2 | Low | [x] Complete |

---

## V2 Requirements (Deferred to Next Milestone)

### Full Extraction

| ID | Requirement | Notes |
|----|-------------|-------|
| **REQ-V2-01** | Extract llm.rs implementations to converge-llm | After traits stable |
| **REQ-V2-02** | Extract backend.rs implementations to converge-runtime | After traits stable |
| **REQ-V2-03** | Extract capability.rs to converge-provider | After traits stable |
| **REQ-V2-04** | Extract model_selection.rs to converge-provider | After traits stable |
| **REQ-V2-05** | Extract prompt.rs to converge-llm | After traits stable |
| **REQ-V2-06** | Create converge-core-test for test utilities | MockProvider, test agents |
| **REQ-V2-07** | Remove deprecated implementations from core | After downstream migration |

### Advanced Testing

| ID | Requirement | Notes |
|----|-------------|-------|
| **REQ-V2-08** | Benchmark suite with criterion | Performance baselines |
| **REQ-V2-09** | Negative tests for boundary violations | Ensure APIs reject bad input |
| **REQ-V2-10** | Integration tests with capability crates | End-to-end validation |

---

## Out of Scope

| Item | Reason |
|------|--------|
| Async runtime integration | Core must remain sync/pure |
| HTTP/Network types | I/O belongs in capability crates |
| Embedding/Recall execution | Implementation, not axiom |
| Prompt rendering logic | Implementation, not axiom |
| "Helpful" defaults | Violates explicit authority tenet |
| Background effects | Violates no hidden work tenet |

---

## Success Criteria (All Met)

1. **Purity:** `cargo deny check` passes with zero forbidden dependencies
2. **Type Safety:** No API allows Fact creation without ValidationReport
3. **Stability:** All serializable types have golden snapshot tests
4. **Documentation:** PURITY.md and BOUNDARY.md exist and are accurate
5. **Compilation:** `cargo build` succeeds with zero warnings
6. **Tests:** All tests pass including proptest invariant checks

---

## Milestone Summary

**Shipped:** 39 of 39 v1 requirements
**Adjusted:** None
**Dropped:** None

All requirements delivered as specified. V2 extraction requirements deferred to next milestone.

---

*Archived: 2026-01-27 as part of v1.0.0 milestone completion*
